<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Management - Brennan College</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%);
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .college-name {
            color: white;
            font-size: 1.5rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .nav-menu {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-menu a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-menu a:hover {
            background: rgba(255,255,255,0.15);
        }

        .main-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 100px);
            padding: 2rem;
        }

        .button-container {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .action-button {
            padding: 1.25rem 2.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            color: white;
            min-width: 180px;
        }

        .add-teacher {
            background: linear-gradient(135deg, #314ecc 0%, #3e58c8 100%);
        }

        .add-teacher:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
        }

        .update-teacher {
            background: linear-gradient(135deg, #314ecc 0%, #3e58c8 100%);
        }

        .update-teacher:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(79, 172, 254, 0.4);
        }

        .delete-teacher {
            background: linear-gradient(135deg, #314ecc 0%, #3e58c8 100%);
        }

        .delete-teacher:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 16px rgba(245, 87, 108, 0.4);
        }

        .action-button:active {
            transform: translateY(0);
        }
        .modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  justify-content: center;
  align-items: center;
}

.modal-content {
  background: white;
  padding: 20px;
  border-radius: var(--radius);
  width: 350px;
  animation: fadeIn 0.3s ease;
}

.teacher-form {
  display: none;
  flex-direction: column;
  gap: 15px;
}

.teacher-form.active {
  display: flex;
}

.form-group {
  display: flex;
  flex-direction: column;
}

input, select {
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: var(--radius);
}

.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

.btn {
  padding: 8px 14px;
  border: none;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 14px;
}

.cancel-btn {
  background: #9ca3af;
  color: white;
}

.cancel-btn:hover {
  background: #6b7280;
}

.next-btn {
  background: var(--button);
  color: white;
}

.next-btn:hover {
  background: #0d5adf;
}

.back-btn {
  background: #9ca3af;
  color: white;
}

.back-btn:hover {
  background: #6b7280;
}

.add-btn {
  background: var(--button);
  color: white;
}

.add-btn:hover {
  background: #0d5adf;
}

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

.form-group {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  margin-bottom: 10px;
}

.form-group input[type="password"],
.form-group input[type="text"] {
  width: 100%; /* make inputs same length */
  box-sizing: border-box;
}

.form-group label {
  font-size: 14px;
  margin-top: 5px;
  display: flex;
  align-items: center;
  gap: 5px;
}

        @media (max-width: 768px) {
            .button-container {
                flex-direction: column;
                gap: 1.5rem;
            }

            .action-button {
                width: 100%;
                max-width: 300px;
            }

            .college-name {
                display: none;
            }

            .nav-menu {
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo-section">
            <div class="logo">
                <svg width="50" height="50" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" fill="#1e3c72"/>
                    <text x="50" y="65" font-family="Arial, sans-serif" font-size="48" font-weight="bold" fill="white" text-anchor="middle">BC</text>
                </svg>
            </div>
            <div class="college-name">Brennan College</div>
        </div>
        <nav class="nav-menu">
            <a href="#home">Home</a>
            <a href="#notification">Notification</a>
            <a href="#logout">Logout</a>
        </nav>
    </header>

    <div class="main-container">
        <div class="button-container">
            <button class="action-button add-teacher" id="add-teacher">Add Teacher</button>
            <button class="action-button update-teacher" id="update-teacher">Update Teacher</button>
            <button class="action-button delete-teacher" id="delete-teacher">Delete Teacher</button>
        </div>
    </div>




    <div id="teacherModal" class="modal">
  <div class="modal-content">
  
    <div class="teacher-form step" id="step1">
      <h2>Add Teacher</h2>
      <div class="form-group">
        <label for="fullname">Full Name</label>
        <input type="text" id="fullname" placeholder="Enter name">
      </div>

      <div class="form-group">
        <label for="gender">Gende</label>
        <select id="gender">
          <option value="">--Select Gender--</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
          <option value="Other">Other</option>
        </select>
      </div>

      <div class="form-group">
        <label for="dob">Date of Birth</label>
        <input type="date" id="dob">
      </div>

      <div class="form-group">
        <label for="dept">Department</label>
        <select id="dept">
          <option value="">--Select Department--</option>
          <option value="cse">Computer Science</option>
          <option value="ece">Electronics & Communication</option>
          <option value="eee">Electrical & Electronics</option>
          <option value="mech">Mechanical</option>
          <option value="civil">Civil</option>
        </select>
      </div>

      <div class="form-group">
        <label for="doj">Date of Joining</label>
        <input type="date" id="doj">
      </div>

      <div class="form-group">
        <label for="teacherid">Teacher ID</label>
        <input type="text" id="teacherid" placeholder="10-digit ID">
      </div>

      <div class="form-actions">
        <button id="cancelBtn" class="btn cancel-btn">Cancel</button>
        <button id="nxtBtn" class="btn next-btn">Next</button>
      </div>
    </div>

    <div class="teacher-form step" id="step2">
      <h2>Set Password</h2>
      <div class="form-group">
      <input type="password" id="password" placeholder="Password" required>
      <label>
        <input type="checkbox" id="showPassword"> Show Password
      </label>
      </div>

      <div class="form-group">
  <input type="password" id="confirmPassword" placeholder="Confirm Password" required>
  <label>
    <input type="checkbox" id="showConfirmPassword"> Show Confirm Password
  </label>
</div>
      <div class="form-actions">
        <button id="backBtn" class="btn back-btn">Back</button>
        <button id="addTeacherBtn" class="btn add-btn">Add Teacher</button>
      </div>
    </div>

  </div>
</div>

    <script>
const addTeacherBtn = document.getElementById('add-teacher');
const teacherModal = document.getElementById('teacherModal');
const cancelBtn = document.getElementById('cancelBtn');
const nextBtn = document.getElementById('nxtBtn');
const backBtn = document.getElementById('backBtn');
const step1 = document.getElementById('step1');
const step2 = document.getElementById('step2');

const fname = document.getElementById('fullname');
const dob = document.getElementById('dob');
const dept = document.getElementById('dept');
const doj = document.getElementById('doj');
const tid = document.getElementById('teacherid');
const genderSelect = document.getElementById('gender');


const nameRegex = /^[A-Za-z\s]{3,}$/; 
const idRegex = /^[0-9]{10}$/; 

//to toggle between menu1 and menu2
function showStep1() {
  step1.style.display = 'flex';
  step1.style.flexDirection = 'column';
  step2.style.display = 'none';
}
function showStep2() {
  step1.style.display = 'none';
  step2.style.display = 'flex';
  step2.style.flexDirection = 'column';
  step2.style.alignItems = 'center';
}

backBtn.addEventListener('click', () => {
  showStep1();
});

addTeacherBtn.addEventListener('click', () => {
    teacherModal.style.display = 'flex'; // open modal
    showStep1(); // ensure step1 is visible
});

nextBtn.addEventListener('click', (event) => {
  event.preventDefault();
  let hasError = false;

  //validating full name
  if (!nameRegex.test(fname.value.trim())) {
    alert("Please enter a valid name (min 3 letters).");
    hasError = true;
  }

  //validating teacher ID
  if (!idRegex.test(tid.value.trim())) {
    alert("Please enter a valid 10-digit Teacher ID.");
    hasError = true;
  }


  if (!hasError) {
    showStep2();
  }
});


cancelBtn.addEventListener('click', () => {
  teacherModal.style.display = 'none';
});


window.addEventListener('click', (event) => {
  if (event.target === teacherModal) {
    teacherModal.style.display = 'none';
  }
});
//to check password strength
function checkPasswordStrength(password) {
    const strongRegex =  /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{9,}$/;

    if (!strongRegex.test(password)) {
      return false;
    }
    return true;
  }
document.getElementById("addTeacherBtn").addEventListener("click", async function (e) {
    const password = document.getElementById("password").value;
    const confirmPassword = document.getElementById("confirmPassword").value;

    if (password !== confirmPassword) {
      alert("Passwords do not match!");
      e.preventDefault(); //Stops form submission
      return;
    }

    if (!checkPasswordStrength(password)) {
      alert("Weak password! Must be at least 8 characters and include uppercase, lowercase, number, and special character.");
      e.preventDefault(); 
      return;
    }
    const selectedGender = genderSelect.value;
    const teacherData = {
      name: fname.value.trim(),
      dob: dob.value.trim(),
      department: dept.value.trim(),
      joiningDate: doj.value.trim(),
      userId: tid.value.trim(),
      password: password,
      gender: selectedGender,
      role: "Teacher"
    };

  //Send data to the server
  try {
    const response = await fetch("/coe/addTeacher", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(teacherData)
    });

    const data = await response.json();

    if (!response.ok) {
      alert(data.message || "Failed to add teacher");
      throw new Error(data.message || "Failed to add teacher");
    }

    alert(data.message || "Teacher added successfully!");
    teacherModal.style.display = 'none';
  } catch (error) {
    console.error("Error:", error);
  }
  });

  //toggle password visibilty
  document.getElementById('showPassword').addEventListener('change', function () {
  const passwordField = document.getElementById('password');
  passwordField.type = this.checked ? 'text' : 'password';
});

//toggle confirm password visibility
document.getElementById('showConfirmPassword').addEventListener('change', function () {
  const confirmPasswordField = document.getElementById('confirmPassword');
  confirmPasswordField.type = this.checked ? 'text' : 'password';
});

    </script>
</body>
</html>